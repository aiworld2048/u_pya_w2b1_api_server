sudo apt install postgresql postgresql-contrib -y
sudo systemctl status postgresql
CREATE DATABASE w2b1_db;
CREATE USER w2b1_db_user WITH PASSWORD 'w2b1production';
GRANT ALL PRIVILEGES ON DATABASE w2b1_db TO w2b1_db_user;
ALTER USER w2b1_db_user WITH PASSWORD 'w2b1production';

sudo -i -u postgres
psql -d w2b1_db

psql -h 127.0.0.1 -U w2b1_db_user -d w2b1_db

GRANT ALL ON SCHEMA public TO w2b1_db_user;
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON TABLES TO w2b1_db_user;
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON SEQUENCES TO w2b1_db_user;

sudo -i -u postgres
psql -d ponewine_db

php -r "file_put_contents('/var/www/html/u_pya_w2b1_api_server/storage/logs/laravel.log', '');" 
composer require elephantio/elephant.io


apt update
sudo apt install certbot python3-certbot-nginx -y

sudo certbot --nginx -d lion11.site -d www.lion11.site



systemctl restart nginx

certbot renew --dry-run

sudo nano /etc/php/8.3/fpm/php.ini
upload_max_filesize = 50M
post_max_size = 50M
sudo systemctl restart php8.1-fpm
systemctl restart php8.3-fpm


server {
    listen 80;
    server_name lion11.site www.lion11.site;
    root /var/www/html/winner_school/public;

    add_header X-Frame-Options "SAMEORIGIN";
    add_header X-XSS-Protection "1; mode=block";
    add_header X-Content-Type-Options "nosniff";

    index index.php;
    client_max_body_size 10000M;


    charset utf-8;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location = /favicon.ico { access_log off; log_not_found off; }
    location = /robots.txt  { access_log off; log_not_found off; }

    error_page 404 /index.php;

    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php8.4-fpm.sock; # Ensure the PHP-FPM version is correct
        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
        include fastcgi_params;
    }

    location ~ /\.(?!well-known).* {
        deny all;
    }


}


â€”-------
sudo ln -s /etc/nginx/sites-available/luckymillion.online /etc/nginx/sites-available/luckymillion.online
sudo ln -s /etc/nginx/sites-available/lion11.site /etc/nginx/sites-enabled/

